print("12345skibidi")

local CORRECT_KEY = "https://dsc.gg/imageloader"
local ROOT_FOLDER = "ImageVAssets"

local Workspace = game:GetService("Workspace")
local Camera = Workspace.CurrentCamera
local VP = Camera.ViewportSize
local SCALE = math.clamp(VP.Y / 900, 0.8, 3.5)

local function S(num) return math.round(num * SCALE) end

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local COLORS = {
    Bg = Color3.fromRGB(18, 15, 22),
    Accent = Color3.fromRGB(160, 60, 255),
    Success = Color3.fromRGB(0, 255, 150),
    Error = Color3.fromRGB(255, 80, 80),
    Shot = Color3.fromRGB(255, 220, 255),
    Text = Color3.fromRGB(240, 240, 255),
    TextDim = Color3.fromRGB(120, 110, 140),
    Hover = Color3.fromRGB(200, 180, 255)
}

local function GetCustomIcon(name, url)
    local fallback = "rbxassetid://6031094678"
    if not writefile or not getcustomasset or not isfolder then return fallback end
    if not isfolder(ROOT_FOLDER) then makefolder(ROOT_FOLDER) end
    local path = ROOT_FOLDER .. "/" .. name .. ".png"
    if not isfile(path) then
        local s, data = pcall(function() return game:HttpGet(url) end)
        if s then writefile(path, data) else return fallback end
    end
    return getcustomasset(path)
end

local ICONS = {
    Files = GetCustomIcon("Bolt", "https://raw.githubusercontent.com/Artem1093z/ScriptsGo/main/bolt_24dp_E3E3E3_FILL0_wght400_GRAD0_opsz24.png"),
    Settings = GetCustomIcon("Settings", "https://raw.githubusercontent.com/Artem1093z/ScriptsGo/main/settings_24dp_E3E3E3_FILL0_wght400_GRAD0_opsz24.png"),
    Info = GetCustomIcon("Shield", "https://raw.githubusercontent.com/Artem1093z/ScriptsGo/main/shield_moon_24dp_E3E3E3_FILL0_wght400_GRAD0_opsz24.png"),
    Close = "rbxassetid://6031094678",
    Menu = "rbxassetid://6031091004"
}

local PNG_Lib = nil
do
    local function LoadModule(url) local s, r = pcall(function() return game:HttpGet(url) end) if not s then return nil end return loadstring(r)() end
    local Deflate = LoadModule("https://raw.githubusercontent.com/MaximumADHD/Roblox-PNG-Library/master/Modules/Deflate.lua")
    local Unfilter = {} 
    function Unfilter:None(s,b,bp,r) for i=1,#s do b[r][i]=string.byte(s,i) end end
    function Unfilter:Sub(s,b,bp,r) for i=1,#s do local x=string.byte(s,i) local a=(i>bp)and b[r][i-bp]or 0 b[r][i]=bit32.band(x+a,0xFF) end end
    function Unfilter:Up(s,b,bp,r) for i=1,#s do local x=string.byte(s,i) local bb=(r>1)and b[r-1][i]or 0 b[r][i]=bit32.band(x+bb,0xFF) end end
    function Unfilter:Average(s,b,bp,r) for i=1,#s do local x=string.byte(s,i) local a=(i>bp)and b[r][i-bp]or 0 local bb=(r>1)and b[r-1][i]or 0 b[r][i]=bit32.band(x+math.floor((a+bb)/2),0xFF) end end
    function Unfilter:Paeth(s,b,bp,r) for i=1,#s do local x=string.byte(s,i) local a=(i>bp)and b[r][i-bp]or 0 local bb=(r>1)and b[r-1][i]or 0 local c=(i>bp and r>1)and b[r-1][i-bp]or 0 local p=a+bb-c local pa,pb,pc=math.abs(p-a),math.abs(p-bb),math.abs(p-c) local pr=(pa<=pb and pa<=pc)and a or(pb<=pc)and bb or c b[r][i]=bit32.band(x+pr,0xFF) end end
    local BinaryReader = {}
    BinaryReader.__index = BinaryReader
    function BinaryReader.new(d) return setmetatable({D=d,P=1,L=#d},BinaryReader) end
    function BinaryReader:ReadByte() if self.P>self.L then return 0 end local b=string.byte(self.D,self.P) self.P=self.P+1 return b end
    function BinaryReader:ReadBytes(c) local r=string.sub(self.D,self.P,self.P+c-1) self.P=self.P+c return r end
    function BinaryReader:ReadString(l) return self:ReadBytes(l) end
    function BinaryReader:ReadInt32() local b1,b2,b3,b4=self:ReadByte(),self:ReadByte(),self:ReadByte(),self:ReadByte() return bit32.lshift(b1,24)+bit32.lshift(b2,16)+bit32.lshift(b3,8)+b4 end
    local PNG = {}
    PNG.__index = PNG
    function PNG.new(d)
        local r = BinaryReader.new(d)
        if r:ReadString(8) ~= "\137PNG\r\n\26\n" then error("Not PNG") end
        local chunks, zlib, reading = {}, {}, true
        while reading do
            local l = r:ReadInt32()
            local t = r:ReadString(4)
            if l>0 then local dt = r:ReadBytes(l) if t=="IDAT" then table.insert(zlib, dt) elseif t=="IHDR" then chunks.IHDR = dt end end
            r:ReadInt32() if t=="IEND" then reading=false end
        end
        local res, idx = {}, 0
        Deflate:InflateZlib({Input=BinaryReader.new(table.concat(zlib)),Output=function(b) idx=idx+1 res[idx]=string.char(b) end})
        local h_r = BinaryReader.new(chunks.IHDR); local w,h = h_r:ReadInt32(), h_r:ReadInt32(); local dep = h_r:ReadByte(); local ct = h_r:ReadByte()
        local samples = 1; if ct == 2 then samples = 3 elseif ct == 4 then samples = 2 elseif ct == 6 then samples = 4 end
        local bpp = math.max(1, samples * (dep/8)); local file = {W=w, H=h, B=bpp, Depth=dep, ColorType=ct, Bit={}}; local buf = BinaryReader.new(table.concat(res))
        for row=1,h do local f = buf:ReadByte(); local sl = buf:ReadBytes(w*bpp); file.Bit[row] = {}; if f==0 then Unfilter:None(sl,file.Bit,bpp,row) elseif f==1 then Unfilter:Sub(sl,file.Bit,bpp,row) elseif f==2 then Unfilter:Up(sl,file.Bit,bpp,row) elseif f==3 then Unfilter:Average(sl,file.Bit,bpp,row) elseif f==4 then Unfilter:Paeth(sl,file.Bit,bpp,row) end end
        return setmetatable(file, PNG)
    end
    function PNG:GetPixel(x,y)
        if not self.Bit[y] then return 0,0,0,0 end
        local i = (x-1)*self.B+1
        local function get(offset) return self.Bit[y][offset] or 0 end
        if self.B == 1 then local g = get(i); return g, g, g, 255 elseif self.B == 2 then local g = get(i); local a = get(i+1); return g, g, g, a elseif self.B == 3 then return get(i), get(i+1), get(i+2), 255 elseif self.B == 4 then return get(i), get(i+1), get(i+2), get(i+3) elseif self.B == 6 then return get(i), get(i+2), get(i+4), 255 end
        return 0,0,0,0
    end
    PNG_Lib = PNG
end

local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
if PlayerGui:FindFirstChild("VelvetDock_") then PlayerGui.VelvetDock_:Destroy() end

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "VelvetDock_"
ScreenGui.Parent = PlayerGui
ScreenGui.ResetOnSpawn = false
ScreenGui.IgnoreGuiInset = true
ScreenGui.DisplayOrder = 999999

local function LoadVelvetDock()
    local SETTINGS = {Quality=1000, Speed=400, Overlap=2.2, RotateFix=true, AutoCenter=true}
    local UI_STATE = {Collapsed=false, CurrentTab=nil, Buttons={}, IsDrawing=false}
    
    local DOCK_W, DOCK_H = S(220), S(55)
    local DOCK_RADIUS = UDim.new(1, 0)
    local ICON_SIZE = S(30)
    local PANEL_W = S(240)
    local FONT_SIZE = math.max(10, S(11))
    local STROKE_THICK = math.max(1.5, S(1.5))
    local PADDING = S(15)

    local function MakeDraggable(frame)
        local dragToggle, dragStart, startPos, dragInput
        frame.InputBegan:Connect(function(input)
            if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) then
                dragToggle = true; dragStart = input.Position; startPos = frame.Position
                input.Changed:Connect(function() if input.UserInputState == Enum.UserInputState.End then dragToggle = false end end)
            end
        end)
        frame.InputChanged:Connect(function(input)
            if (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then dragInput = input end
        end)
        UserInputService.InputChanged:Connect(function(input)
            if input == dragInput and dragToggle then
                local delta = input.Position - dragStart
                TweenService:Create(frame, TweenInfo.new(0.05), {Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)}):Play()
            end
        end)
    end

    local Dock = Instance.new("Frame", ScreenGui)
    Dock.Name = "MainDock"; Dock.Size = UDim2.new(0, DOCK_W, 0, DOCK_H); Dock.Position = UDim2.new(0.5, -(DOCK_W/2), 0.85, 0)
    Dock.BackgroundColor3 = COLORS.Bg; Dock.BackgroundTransparency = 0.1; Dock.ClipsDescendants = false
    
    Dock.Size = UDim2.new(0,0,0,DOCK_H)
    TweenService:Create(Dock, TweenInfo.new(0.8, Enum.EasingStyle.Elastic), {Size = UDim2.new(0, DOCK_W, 0, DOCK_H)}):Play()

    local DockCorner = Instance.new("UICorner", Dock); DockCorner.CornerRadius = DOCK_RADIUS
    local DockStroke = Instance.new("UIStroke", Dock); DockStroke.Color = COLORS.Accent; DockStroke.Transparency = 0.6; DockStroke.Thickness = STROKE_THICK

    local Ghost = Instance.new("Frame", Dock)
    Ghost.AnchorPoint = Vector2.new(0.5, 0.5); Ghost.Position = UDim2.new(0.5, 0, 0.5, 0); Ghost.Size = UDim2.new(1,0,1,0)
    Ghost.BackgroundColor3 = COLORS.Bg; Ghost.BackgroundTransparency = 1; Ghost.ZIndex = 0
    Instance.new("UICorner", Ghost).CornerRadius = DOCK_RADIUS
    local GhostStroke = Instance.new("UIStroke", Ghost); GhostStroke.Color = COLORS.Shot; GhostStroke.Transparency = 1; GhostStroke.Thickness = STROKE_THICK

    MakeDraggable(Dock)

    local BtnContainer = Instance.new("Frame", Dock)
    BtnContainer.Size = UDim2.new(1,0,1,0); BtnContainer.BackgroundTransparency = 1; BtnContainer.ClipsDescendants = true
    Instance.new("UICorner", BtnContainer).CornerRadius = DOCK_RADIUS
    local UIList = Instance.new("UIListLayout", BtnContainer); UIList.FillDirection = Enum.FillDirection.Horizontal; UIList.HorizontalAlignment = Enum.HorizontalAlignment.Center; UIList.VerticalAlignment = Enum.VerticalAlignment.Center; UIList.Padding = UDim.new(0, PADDING)

    local Panel = Instance.new("Frame", ScreenGui)
    Panel.Size = UDim2.new(0, PANEL_W, 0, 0); Panel.BackgroundColor3 = COLORS.Bg; Panel.BackgroundTransparency = 0.1; Panel.ClipsDescendants = true; Panel.Visible = false
    Instance.new("UICorner", Panel).CornerRadius = UDim.new(0, S(12))
    local PanelStroke = Instance.new("UIStroke", Panel); PanelStroke.Color = COLORS.Accent; PanelStroke.Transparency = 1; PanelStroke.Thickness = STROKE_THICK

    RunService.RenderStepped:Connect(function()
        if Dock.Parent and Panel.Visible then
            Panel.Position = UDim2.new(Dock.Position.X.Scale, Dock.Position.X.Offset + (Dock.Size.X.Offset/2) - (Panel.Size.X.Offset/2), Dock.Position.Y.Scale, Dock.Position.Y.Offset - Panel.Size.Y.Offset - S(10))
        end
    end)

    local TabFiles = Instance.new("ScrollingFrame", Panel); TabFiles.Name="Files"; TabFiles.Size=UDim2.new(1,0,1,0); TabFiles.Visible=false; TabFiles.BackgroundTransparency=1; TabFiles.ScrollBarThickness=S(2)
    Instance.new("UIListLayout", TabFiles).HorizontalAlignment="Center"; Instance.new("UIListLayout", TabFiles).Padding=UDim.new(0, S(5)); Instance.new("UIPadding", TabFiles).PaddingTop=UDim.new(0, S(10))
    local TabSettings = Instance.new("Frame", Panel); TabSettings.Name="Settings"; TabSettings.Size=UDim2.new(1,0,1,0); TabSettings.Visible=false; TabSettings.BackgroundTransparency=1
    local TabInfo = Instance.new("Frame", Panel); TabInfo.Name="Info"; TabInfo.Size=UDim2.new(1,0,1,0); TabInfo.Visible=false; TabInfo.BackgroundTransparency=1

    local function UpdateButtonVisuals()
        for name, btn in pairs(UI_STATE.Buttons) do
            if name == "Collapse" then continue end 
            local targetSize = (UI_STATE.CurrentTab == name) and S(34) or ICON_SIZE
            local targetColor = (UI_STATE.CurrentTab == name) and COLORS.Accent or COLORS.TextDim
            TweenService:Create(btn, TweenInfo.new(0.2), {ImageColor3 = targetColor, Size = UDim2.new(0,targetSize,0,targetSize)}):Play()
        end
    end

    local function ForceResetUI()
        UI_STATE.CurrentTab = nil; Panel.Visible = false; PanelStroke.Transparency = 1; UpdateButtonVisuals()
    end

    local function OpenTab(tabName, height)
        height = S(height)
        if UI_STATE.CurrentTab == tabName then
            UI_STATE.CurrentTab = nil
            TweenService:Create(PanelStroke, TweenInfo.new(0.1), {Transparency = 1}):Play()
            TweenService:Create(Panel, TweenInfo.new(0.2, Enum.EasingStyle.Quad), {Size = UDim2.new(0, PANEL_W, 0, 0)}):Play()
            task.wait(0.2); Panel.Visible = false
        else
            UI_STATE.CurrentTab = tabName; Panel.Visible = true
            TabFiles.Visible = (tabName=="Files"); TabSettings.Visible = (tabName=="Settings"); TabInfo.Visible = (tabName=="Info")
            TweenService:Create(PanelStroke, TweenInfo.new(0.2), {Transparency = 0.5}):Play()
            TweenService:Create(Panel, TweenInfo.new(0.4, Enum.EasingStyle.Elastic), {Size = UDim2.new(0, PANEL_W, 0, height)}):Play()
        end
        UpdateButtonVisuals()
    end

    local function CreateDockBtn(icon, name, callback)
        local btn = Instance.new("ImageButton", BtnContainer); btn.Name = name; btn.Size = UDim2.new(0, ICON_SIZE, 0, ICON_SIZE); btn.Image = icon; btn.BackgroundTransparency = 1; btn.ImageColor3 = COLORS.TextDim; UI_STATE.Buttons[name] = btn
        btn.MouseEnter:Connect(function() if UI_STATE.CurrentTab ~= name then TweenService:Create(btn, TweenInfo.new(0.2), {ImageColor3 = COLORS.Hover}):Play() end end)
        btn.MouseLeave:Connect(function() if UI_STATE.CurrentTab ~= name then TweenService:Create(btn, TweenInfo.new(0.2), {ImageColor3 = COLORS.TextDim}):Play() end end)
        btn.MouseButton1Click:Connect(function() if callback then callback() end end)
        return btn
    end

    local function CreateSlider(parent, label, min, max, default, callback)
        local frame = Instance.new("Frame", parent); frame.Size = UDim2.new(0.9, 0, 0, S(50)); frame.Position = UDim2.new(0.05, 0, 0.02, 0); frame.BackgroundTransparency = 1
        local titleLbl = Instance.new("TextLabel", frame); titleLbl.Text = label; titleLbl.TextColor3 = COLORS.TextDim; titleLbl.Size = UDim2.new(1,0,0,S(15)); titleLbl.BackgroundTransparency = 1; titleLbl.Font = Enum.Font.GothamBold; titleLbl.TextSize = FONT_SIZE; titleLbl.TextXAlignment = Enum.TextXAlignment.Left
        local bar = Instance.new("Frame", frame); bar.Size = UDim2.new(1, 0, 0, S(24)); bar.Position = UDim2.new(0, 0, 0, S(20)); bar.BackgroundColor3 = Color3.fromRGB(40,35,50); Instance.new("UICorner", bar).CornerRadius = UDim.new(0,S(6))
        local fill = Instance.new("Frame", bar); fill.Size = UDim2.new(1, 0, 1, 0); fill.BackgroundColor3 = COLORS.Accent; fill.ZIndex = 1; Instance.new("UICorner", fill).CornerRadius = UDim.new(0,S(6))
        local valLbl = Instance.new("TextLabel", bar); valLbl.Size = UDim2.new(1,0,1,0); valLbl.BackgroundTransparency = 1; valLbl.ZIndex = 2; valLbl.Font = Enum.Font.GothamBold; valLbl.TextSize = FONT_SIZE; valLbl.TextColor3 = Color3.new(1,1,1); valLbl.Text = "100%"
        local trigger = Instance.new("TextButton", bar); trigger.Size = UDim2.new(1,0,1,0); trigger.BackgroundTransparency = 1; trigger.Text = ""; trigger.ZIndex = 5
        
        local dragging = false
        trigger.InputBegan:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then dragging = true end end)
        UserInputService.InputEnded:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then dragging = false end end)
        RunService.RenderStepped:Connect(function()
            if dragging then
                local relPos = math.clamp((UserInputService:GetMouseLocation().X - bar.AbsolutePosition.X) / bar.AbsoluteSize.X, 0, 1)
                fill.Size = UDim2.new(relPos, 0, 1, 0)
                local val = math.floor(min + (max - min) * relPos)
                valLbl.Text = val .. "%"
                callback(val)
            end
        end)
    end

    local function CreateUrlLoader(parent)
        local frame = Instance.new("Frame", parent); frame.Size = UDim2.new(0.9, 0, 0, S(80)); frame.Position = UDim2.new(0.05, 0, 0.45, 0); frame.BackgroundTransparency = 1
        local lbl = Instance.new("TextLabel", frame); lbl.Text = "LOAD FROM URL (RAW)"; lbl.TextColor3 = COLORS.TextDim; lbl.Size = UDim2.new(1,0,0,S(20)); lbl.BackgroundTransparency = 1; lbl.Font = Enum.Font.GothamBold; lbl.TextSize = FONT_SIZE; lbl.TextXAlignment = Enum.TextXAlignment.Left
        local box = Instance.new("TextBox", frame); box.Size = UDim2.new(1, 0, 0, S(30)); box.Position = UDim2.new(0, 0, 0.3, 0); box.BackgroundColor3 = Color3.fromRGB(30, 25, 35); box.TextColor3 = COLORS.Text; box.PlaceholderText = "https://..."; box.Text = ""; box.Font = Enum.Font.Code; box.TextSize = FONT_SIZE; box.TextWrapped = true; Instance.new("UICorner", box).CornerRadius = UDim.new(0, S(6)); Instance.new("UIStroke", box).Color = COLORS.Accent; box.UIStroke.Transparency = 0.8
        local loadBtn = Instance.new("TextButton", frame); loadBtn.Size = UDim2.new(1, 0, 0, S(25)); loadBtn.Position = UDim2.new(0, 0, 0.75, 0); loadBtn.BackgroundColor3 = COLORS.Accent; loadBtn.Text = "DOWNLOAD & PAINT"; loadBtn.TextColor3 = Color3.new(1,1,1); loadBtn.Font = Enum.Font.GothamBold; loadBtn.TextSize = FONT_SIZE; Instance.new("UICorner", loadBtn).CornerRadius = UDim.new(0, S(6))
        
        loadBtn.MouseButton1Click:Connect(function()
            if box.Text == "" then return end
            loadBtn.Text = "DOWNLOADING..."
            local success, data = pcall(function() return game:HttpGet(box.Text) end)
            if success then
                if not isfolder(ROOT_FOLDER) then makefolder(ROOT_FOLDER) end
                local tempName = ROOT_FOLDER .. "/temp_"..math.random(1000,9999)..".png"
                writefile(tempName, data); loadBtn.Text = "PAINTING..."; ForceResetUI(); task.wait(0.1); _G.VelvetDraw(readfile(tempName))
                task.delay(10, function() if isfile(tempName) then delfile(tempName) end end); loadBtn.Text = "DOWNLOAD & PAINT"
            else loadBtn.Text = "ERROR (CHECK URL)"; task.wait(2); loadBtn.Text = "DOWNLOAD & PAINT" end
        end)
    end

    local function RefreshFiles()
        for _,v in pairs(TabFiles:GetChildren()) do if v:IsA("TextButton") then v:Destroy() end end
        local files = {}
        if listfiles then pcall(function() files = listfiles("") end) end
        local c = 0
        for _, path in pairs(files) do
            if path:sub(-4):lower() == ".png" then
                local name = path:match("([^/^\\]+)$")
                local btn = Instance.new("TextButton", TabFiles); btn.Size = UDim2.new(0.9, 0, 0, S(35)); btn.BackgroundColor3 = Color3.fromRGB(30, 25, 35); btn.Text = "  " .. name; btn.TextColor3 = COLORS.Text; btn.Font = Enum.Font.GothamMedium; btn.TextSize = FONT_SIZE; btn.TextXAlignment = Enum.TextXAlignment.Left; Instance.new("UICorner", btn).CornerRadius = UDim.new(0, S(6))
                btn.MouseButton1Click:Connect(function() ForceResetUI(); task.wait(0.1); if readfile then _G.VelvetDraw(readfile(path)) end end); c=c+1
            end
        end
        TabFiles.CanvasSize = UDim2.new(0,0,0, c*S(40))
    end

    local Btn1 = CreateDockBtn(ICONS.Files, "Files", function() RefreshFiles(); OpenTab("Files", 250) end)
    local Btn2 = CreateDockBtn(ICONS.Settings, "Settings", function() OpenTab("Settings", 180) end)
    local Btn3 = CreateDockBtn(ICONS.Info, "Info", function() OpenTab("Info", 210) end)

    local Btn4 = Instance.new("ImageButton", BtnContainer); Btn4.Name = "Collapse"; Btn4.Size = UDim2.new(0, ICON_SIZE, 0, ICON_SIZE); Btn4.Image = ICONS.Close; Btn4.BackgroundTransparency = 1; Btn4.ImageColor3 = COLORS.TextDim
    Btn4.MouseButton1Click:Connect(function()
        UI_STATE.Collapsed = not UI_STATE.Collapsed
        TweenService:Create(Panel, TweenInfo.new(0.2), {Size = UDim2.new(0, PANEL_W, 0, 0)}):Play(); TweenService:Create(PanelStroke, TweenInfo.new(0.1), {Transparency = 1}):Play(); UI_STATE.CurrentTab = nil; UpdateButtonVisuals()
        if UI_STATE.Collapsed then
            TweenService:Create(Dock, TweenInfo.new(0.5, Enum.EasingStyle.Elastic), {Size = UDim2.new(0, DOCK_H, 0, DOCK_H)}):Play()
            Btn1.Visible=false; Btn2.Visible=false; Btn3.Visible=false; Btn4.Image = ICONS.Menu
        else
            TweenService:Create(Dock, TweenInfo.new(0.5, Enum.EasingStyle.Elastic), {Size = UDim2.new(0, DOCK_W, 0, DOCK_H)}):Play()
            task.wait(0.1); Btn1.Visible=true; Btn2.Visible=true; Btn3.Visible=true; Btn4.Image = ICONS.Close
        end
    end)

    CreateSlider(TabSettings, "QUALITY", 0, 100, 100, function(val) 
        SETTINGS.Quality = 100 + (val * 9)
    end)
    CreateUrlLoader(TabSettings)

    local InfoText = [[
<b>INSTRUCTIONS (HOW TO USE):</b>

1. <b>Workspace Folder:</b> To see files in the list, place your .PNG images into the <u>workspace</u> folder of your executor.
2. <b>File Names:</b> Keep names simple (e.g. "image.png").
3. <b>Formats:</b> <font color="#A03CFF"><b>ONLY .PNG FILES</b></font> are supported.
4. <b>Settings:</b> Use "Quality" to adjust pixel density. 1000 is max detail. Lower values make bigger pixels (faster).
5. <b>URL Load:</b> You can paste a direct link to an image (e.g. Discord or Imgur link) in Settings.
]]
    local InfoLbl = Instance.new("TextLabel", TabInfo); InfoLbl.Size = UDim2.new(0.9,0,1,0); InfoLbl.Position = UDim2.new(0.05,0,0,0); InfoLbl.BackgroundTransparency = 1; InfoLbl.TextColor3 = COLORS.Text; InfoLbl.TextWrapped = true; InfoLbl.Font = Enum.Font.Gotham; InfoLbl.RichText = true; InfoLbl.TextXAlignment = Enum.TextXAlignment.Center; InfoLbl.TextScaled = true; InfoLbl.Text = InfoText
    local TextConstraint = Instance.new("UITextSizeConstraint", InfoLbl); TextConstraint.MaxTextSize = S(12); TextConstraint.MinTextSize = 8

    _G.VelvetDraw = function(pngData)
        local DrawingHandler, Layers, CurrentCanvas
        local function FindLayers()
            if Layers and CurrentCanvas then return true end
            pcall(function()
                local MS = LocalPlayer.PlayerScripts.Libraries.DrawingHandler; DrawingHandler = require(MS)
                local ClearFunc = DrawingHandler.ClearEntireCanvas
                local s, r = pcall(function() return debug.getupvalue(ClearFunc, 7) end)
                if s and type(r) == "table" and r.GetCurrentCanvas then Layers = r else
                    for i = 1, 25 do local val = debug.getupvalue(ClearFunc, i); if type(val) == "table" and rawget(val, "GetCurrentCanvas") then Layers = val break end end
                end
            end)
            return Layers ~= nil
        end

        if not FindLayers() then return end
        CurrentCanvas = Layers:GetCurrentCanvas()
        if not CurrentCanvas then return end
        local success, img = pcall(function() return PNG_Lib.new(pngData) end)
        if not success then return end

        local ImgW, ImgH = img.W, img.H
        local LoopW, LoopH = ImgW, ImgH
        if SETTINGS.RotateFix then LoopW, LoopH = ImgH, ImgW end

        UI_STATE.IsDrawing = true
        task.spawn(function()
            while UI_STATE.IsDrawing and Dock.Parent do
                TweenService:Create(DockStroke, TweenInfo.new(0.05, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Color = COLORS.Shot, Thickness = S(4), Transparency = 0}):Play()
                Ghost.Size = UDim2.new(1, 0, 1, 0); GhostStroke.Transparency = 0; GhostStroke.Color = COLORS.Shot
                TweenService:Create(Ghost, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = UDim2.new(1, S(60), 1, S(60))}):Play()
                TweenService:Create(GhostStroke, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Transparency = 1}):Play()
                task.wait(0.05)
                TweenService:Create(DockStroke, TweenInfo.new(0.4, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Color = COLORS.Accent, Thickness = STROKE_THICK, Transparency = 0.6}):Play()
                task.wait(0.35) 
            end
            TweenService:Create(DockStroke, TweenInfo.new(0.5), {Color = COLORS.Accent, Thickness = STROKE_THICK, Transparency = 0.6}):Play()
            GhostStroke.Transparency = 1
        end)

        task.spawn(function()
            pcall(function() if CurrentCanvas.GetBuffer then CurrentCanvas.BlendingBuffer = CurrentCanvas:GetBuffer() end end)
            CurrentCanvas.AlphaBlendingMode = 2; CurrentCanvas.Alpha = 1 
            local ResX, ResY = 3500, 3575
            if CurrentCanvas.Resolution and typeof(CurrentCanvas.Resolution)=="Vector2" then ResX = CurrentCanvas.Resolution.X; ResY = CurrentCanvas.Resolution.Y elseif CurrentCanvas.Width then ResX = CurrentCanvas.Width; ResY = CurrentCanvas.Height end

            local Step = 1
            if LoopW > SETTINGS.Quality or LoopH > SETTINGS.Quality then Step = math.ceil(math.max(LoopW, LoopH) / SETTINGS.Quality) end
            
            local EffectiveW = LoopW / Step; local EffectiveH = LoopH / Step
            local FinalScale = math.min(ResX / EffectiveW, ResY / EffectiveH) + 0.02
            local BrushRadius = (FinalScale / 2) * SETTINGS.Overlap
            local StartX = (ResX - (EffectiveW * FinalScale)) / 2; local StartY = (ResY - (EffectiveH * FinalScale)) / 2
            if not SETTINGS.AutoCenter then StartX = 0; StartY = 0 end

            for y = 1, ImgH, Step do
                for x = 1, ImgW, Step do
                    if not Dock.Parent then UI_STATE.IsDrawing = false; break end 
                    local r, g, b, a = img:GetPixel(x, y)
                    if a > 80 then
                        local DrawX, DrawY
                        if SETTINGS.RotateFix then DrawX = (ImgH - y); DrawY = x else DrawX = x; DrawY = y end
                        local FinalX = StartX + ((DrawX / Step) * FinalScale); local FinalY = StartY + ((DrawY / Step) * FinalScale)
                        
                        if FinalX > -BrushRadius*2 and FinalX < ResX+BrushRadius*2 and FinalY > -BrushRadius*2 and FinalY < ResY+BrushRadius*2 then
                             pcall(function() CurrentCanvas:DrawCircle(Vector2.new(FinalX, FinalY), BrushRadius, Color3.fromRGB(r, g, b)) end)
                             if math.random(1, SETTINGS.Speed) == 1 then pcall(function() CurrentCanvas:Render() end); task.wait() end
                        end
                    end
                end
            end
            pcall(function() CurrentCanvas:Render() end)
            UI_STATE.IsDrawing = false
        end)
    end
end

local function LoadKeySystem()
    local KeyW, KeyH = S(280), S(140)
    
    local KeyFrame = Instance.new("Frame", ScreenGui)
    KeyFrame.Name = "KeySystem"; KeyFrame.Size = UDim2.new(0, KeyW, 0, KeyH); KeyFrame.Position = UDim2.new(0.5, -KeyW/2, 0.5, -KeyH/2)
    KeyFrame.BackgroundColor3 = COLORS.Bg; KeyFrame.BackgroundTransparency = 0.1
    Instance.new("UICorner", KeyFrame).CornerRadius = UDim.new(0, S(16))
    local KeyStroke = Instance.new("UIStroke", KeyFrame); KeyStroke.Color = COLORS.Accent; KeyStroke.Thickness = S(1.5); KeyStroke.Transparency = 0.5

    local Title = Instance.new("TextLabel", KeyFrame)
    Title.Text = "AUTHENTICATION"; Title.Size = UDim2.new(1,0,0,S(30)); Title.Position = UDim2.new(0,0,0,S(10))
    Title.Font = Enum.Font.GothamBold; Title.TextSize = S(14); Title.TextColor3 = COLORS.Text; Title.BackgroundTransparency = 1

    local Box = Instance.new("TextBox", KeyFrame)
    Box.Size = UDim2.new(0.8, 0, 0, S(35)); Box.Position = UDim2.new(0.1, 0, 0.35, 0)
    Box.BackgroundColor3 = Color3.fromRGB(30,25,35); Box.TextColor3 = COLORS.Text; Box.Font = Enum.Font.Code; Box.TextSize = S(12)
    Box.Text = ""; Box.PlaceholderText = "Enter Key..."
    Instance.new("UICorner", Box).CornerRadius = UDim.new(0, S(8)); Instance.new("UIStroke", Box).Color = COLORS.Accent; Box.UIStroke.Transparency = 0.8

    local Submit = Instance.new("TextButton", KeyFrame)
    Submit.Text = "SUBMIT"; Submit.Size = UDim2.new(0.38, 0, 0, S(30)); Submit.Position = UDim2.new(0.52, 0, 0.7, 0)
    Submit.BackgroundColor3 = COLORS.Accent; Submit.TextColor3 = Color3.new(1,1,1); Submit.Font = Enum.Font.GothamBold; Submit.TextSize = S(12)
    Instance.new("UICorner", Submit).CornerRadius = UDim.new(0, S(8))

    local CopyLink = Instance.new("TextButton", KeyFrame)
    CopyLink.Text = "COPY LINK"; CopyLink.Size = UDim2.new(0.38, 0, 0, S(30)); CopyLink.Position = UDim2.new(0.1, 0, 0.7, 0)
    CopyLink.BackgroundColor3 = Color3.fromRGB(50,50,60); CopyLink.TextColor3 = COLORS.Text; CopyLink.Font = Enum.Font.GothamBold; CopyLink.TextSize = S(12)
    Instance.new("UICorner", CopyLink).CornerRadius = UDim.new(0, S(8))

    CopyLink.MouseButton1Click:Connect(function()
        if setclipboard then setclipboard(CORRECT_KEY) end
        CopyLink.Text = "COPIED!"; task.wait(1); CopyLink.Text = "COPY LINK"
    end)

    Submit.MouseButton1Click:Connect(function()
        if Box.Text == CORRECT_KEY then
            TweenService:Create(KeyStroke, TweenInfo.new(0.3), {Color = COLORS.Success}):Play()
            Submit.BackgroundColor3 = COLORS.Success; Submit.Text = "GRANTED"
            Title.Text = "ACCESS GRANTED"; Title.TextColor3 = COLORS.Success
            task.wait(0.8)
            TweenService:Create(KeyFrame, TweenInfo.new(0.3), {Size = UDim2.new(0,0,0,0), BackgroundTransparency=1}):Play()
            task.wait(0.3); KeyFrame:Destroy(); LoadVelvetDock()
        else
            TweenService:Create(KeyStroke, TweenInfo.new(0.1), {Color = COLORS.Error}):Play()
            Box.Text = ""; Box.PlaceholderText = "INVALID KEY"
            task.wait(0.5)
            TweenService:Create(KeyStroke, TweenInfo.new(0.5), {Color = COLORS.Accent}):Play()
        end
    end)
end

LoadKeySystem()
